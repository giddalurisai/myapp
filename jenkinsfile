
pipeline {
    agent {
  label 'sai_slave'
}
	environment {
  PATH = "/opt/maven/bin:$PATH"
}
    stages {
        stage('Hello') {
            steps {
                echo 'Hello World'
            }
        }
		stage ('checkout') {
		steps {
		checkout([$class: 'GitSCM', branches: [[name: '*/master']], extensions: [], userRemoteConfigs: [[credentialsId: 'gitHUBCRED', url: 'https://github.com/giddalurisai/myapp.git']]])
		}
		}
		stage('build') {
		steps {
		sh 'mvn package'
    }
}
		stage('deploy') {
		steps {
		deploy adapters: [tomcat8(credentialsId: 'tom_CRED_sai', path: '', url: 'http://65.0.182.157:8080')], contextPath: 'kumar', war: '**/*.war'
}
}
		//stage('store_to nexus') {
		//steps {
		//nexusArtifactUploader artifacts: [[artifactId: 'hello-world-war', classifier: '', file: '/home/ec2-user/workspace/sai/target/hello-world-war-2.0.4.war', type: 'war']], credentialsId: 'sai-nexus-cred', groupId: 'com.efsavage', nexusUrl: '3.110.20.247:8081', nexusVersion: 'nexus3', protocol: 'http', repository: 'sai', version: '2.0.4'
}
}
//}
//}
